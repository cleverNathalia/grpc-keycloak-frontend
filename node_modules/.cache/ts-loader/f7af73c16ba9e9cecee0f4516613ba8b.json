{"remainingRequest":"/home/admin/Documents/client-part2/node_modules/babel-loader/lib/index.js!/home/admin/Documents/client-part2/node_modules/ts-loader/index.js??ref--13-2!/home/admin/Documents/client-part2/node_modules/vuetify-loader/lib/loader.js??ref--19-0!/home/admin/Documents/client-part2/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/admin/Documents/client-part2/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/admin/Documents/client-part2/src/App.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/admin/Documents/client-part2/src/App.vue","mtime":1581593199793},{"path":"/home/admin/Documents/client-part2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/admin/Documents/client-part2/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/admin/Documents/client-part2/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/admin/Documents/client-part2/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/home/admin/Documents/client-part2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/admin/Documents/client-part2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFZ1ZSBmcm9tICJ2dWUiOyAvLyBBREQgVEhFIE5FVyBDT01QT05FTlRTCgppbXBvcnQgVXNlciBmcm9tICIuL2NvbXBvbmVudHMvVXNlci52dWUiOwppbXBvcnQgQWRtaW4gZnJvbSAiLi9jb21wb25lbnRzL0FkbWluLnZ1ZSI7CmltcG9ydCBOYXYgZnJvbSAiLi9jb21wb25lbnRzL05hdi52dWUiOyAvLyBBREQgS0VZQ0xPQUsKCmltcG9ydCBLZXljbG9hayBmcm9tICIuLi9ub2RlX21vZHVsZXMva2V5Y2xvYWstanMvZGlzdC9rZXljbG9hayI7IC8vQUREIEdSUEMKCmltcG9ydCB7IGdycGMgfSBmcm9tICJAaW1wcm9iYWJsZS1lbmcvZ3JwYy13ZWIiOyAvL0FERCBTVFVCUwoKaW1wb3J0IHsgSGVsbG9SZXF1ZXN0LCBIZWxsb1JlcGx5IH0gZnJvbSAiQC9oZWxsby9zcmMvcHJvdG8vaGVsbG9fcGIiOwppbXBvcnQgeyBIZWxsb1NlcnZpY2UgfSBmcm9tICJAL2hlbGxvL3NyYy9wcm90by9oZWxsb19wYl9zZXJ2aWNlIjsKZXhwb3J0IGRlZmF1bHQgVnVlLmV4dGVuZCh7CiAgbmFtZTogIkFwcCIsCiAgY29tcG9uZW50czogewogICAgVXNlcjogVXNlciwKICAgIEFkbWluOiBBZG1pbiwKICAgIE5hdjogTmF2CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY29tcG9uZW50TmFtZTogIiIsCiAgICAgIHBlb3BsZUFycjogW10sCiAgICAgIHBlb3BsZUhlYWRlcjogWyJJRCIsICJOYW1lIiwgIkFkZHJlc3MiLCAiUGhvbmUiXSwKICAgICAgcm9sZTogU3RyaW5nLAogICAgICBoZWFkZXJOYW1lOiBTdHJpbmcsCiAgICAgIGluaXRPcHRpb25zOiB7CiAgICAgICAgcmVhbG06ICJrZXljbG9hay1kZW1vIiwKICAgICAgICB1cmw6ICJodHRwOi8vbG9jYWxob3N0OjgwODAvYXV0aC8iLAogICAgICAgIGNsaWVudElkOiAidnVlLXRlc3QtYXBwIgogICAgICB9LAogICAgICBrZXljbG9hazogS2V5Y2xvYWsoKQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIGxvZ091dCgpOiBhbnl7CiAgICAvLyAgIGNvbnNvbGUubG9nKCJMT0dPVVQiKTsKICAgIC8vICAgdGhpcy5rZXljbG9hay5sb2dvdXQoKTsKICAgIC8vIH0sCiAgICBsb2FkUGFnZTogZnVuY3Rpb24gbG9hZFBhZ2UoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvLyBUSElTIElTIFRIRSBDT1BJRUQgQ09ERSBGUk9NIFRIRSBLRVlDTE9BSyBBRE1JTklTVFJBVElPTiBDT05TT0xFLiBKVVNUIEFEQVBUIElULCBTTyBUSEFUIElUIE1BVEhFUyBUSElTIEZPUk1BVAogICAgICB0aGlzLmtleWNsb2FrID0gS2V5Y2xvYWsodGhpcy5pbml0T3B0aW9ucyk7CiAgICAgIHZhciByb2xlcyA9ICIiOwogICAgICB0aGlzLmtleWNsb2FrLmluaXQoewogICAgICAgIG9uTG9hZDogImxvZ2luLXJlcXVpcmVkIgogICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uIChhdXRoKSB7CiAgICAgICAgLy8gQ0hFQ0sgSUYgVEhFIFVTRVIgSVMgQVVUSEVOVElDQVRFRAogICAgICAgIGlmICghYXV0aCkgewogICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiU1VDQ0VTU0ZVTExZIEFVVEhFTlRJQ0FURUQiKTsgLy8gQ0hFQ0sgV0hBVCBST0xFUyBUSEVZIEhBVkUgQU5EIERJU1BMQVkgVEhFIENPTVBPTkVOVCBBQ0NPUkRJTkcgVE8gVEhFIFJPTEUKCiAgICAgICAgICByb2xlcyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoX3RoaXMua2V5Y2xvYWsudG9rZW5QYXJzZWQpKTsKICAgICAgICAgIF90aGlzLnJvbGUgPSByb2xlcy5yZWFsbV9hY2Nlc3Mucm9sZXM7CiAgICAgICAgICBfdGhpcy5jb21wb25lbnROYW1lID0gU3RyaW5nKF90aGlzLnJvbGUpOwogICAgICAgICAgX3RoaXMuaGVhZGVyTmFtZSA9IF90aGlzLmNvbXBvbmVudE5hbWUgPT0gJ2FkbWluJyA/ICdwdXJwbGUnIDogJ3RlYWwnOyAvL01BS0UgR1JQQyBDQUxMIFRPIEJBQ0tFTkQKCiAgICAgICAgICB2YXIgcmVxID0gbmV3IEhlbGxvUmVxdWVzdCgpOwogICAgICAgICAgcmVxLnNldFJvbGUoU3RyaW5nKF90aGlzLnJvbGUpKTsKICAgICAgICAgIHZhciByZXBsID0gbmV3IEhlbGxvUmVwbHkoKTsKICAgICAgICAgIGdycGMuaW52b2tlKEhlbGxvU2VydmljZS5IZWxsbywgewogICAgICAgICAgICByZXF1ZXN0OiByZXEsCiAgICAgICAgICAgIGhvc3Q6ICJodHRwOi8vMTI3LjAuMC4xOjkwOTAvIiwKICAgICAgICAgICAgb25NZXNzYWdlOiBmdW5jdGlvbiBvbk1lc3NhZ2UobWVzc2FnZSkgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJSRUNFSVZFRCBEQVRBIiwgbWVzc2FnZS50b09iamVjdCgpKTsKCiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLmFycmF5WzBdLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5wZW9wbGVBcnIucHVzaChtZXNzYWdlLmFycmF5WzBdW2ldKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG9uRW5kOiBmdW5jdGlvbiBvbkVuZChjb2RlLCBtc2csIHRyYWlsZXJzKSB7CiAgICAgICAgICAgICAgaWYgKGNvZGUgPT09IGdycGMuQ29kZS5PSykgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkNBTEwgV0FTIFNVQ0NFU1NGVUxMIik7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjb2RlKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG1zZyk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0cmFpbGVycyk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJDQUxMIEZBSUxFRCIpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coY29kZSk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhtc2cpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2codHJhaWxlcnMpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSAvLyBTRVQgVEhFIFRPS0VOIElOIFRIRSBMT0NBTFNUT1JBR0UKCgogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ2dWUtdG9rZW4iLCBTdHJpbmcoX3RoaXMua2V5Y2xvYWsudG9rZW4pKTsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidnVlLXJlZnJlc2gtdG9rZW4iLCBTdHJpbmcoX3RoaXMua2V5Y2xvYWsucmVmcmVzaFRva2VuKSk7IC8vIEhBTkRMRSBUT0tFTiBUSU1FT1VUCgogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMua2V5Y2xvYWsudXBkYXRlVG9rZW4oNzApLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlZnJlc2hlZCkgewogICAgICAgICAgICBpZiAocmVmcmVzaGVkKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coIlRva2VuIFJlZnJlc2hlZCIpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJUb2tlbiBOb3QgUmVmcmVzaGVkIik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coIkZhaWxlZCBUbyBSZWZyZXNoIFRva2VuIik7CiAgICAgICAgICB9KTsKICAgICAgICB9LCA2MDAwMCk7CiAgICAgIH0pLmVycm9yKGZ1bmN0aW9uICgpIHsKICAgICAgICBjb25zb2xlLmxvZygiQVVUSEVOVElDQVRJT04gRkFJTEVEIik7CiAgICAgIH0pOyAvLyBrZXljbG9hay5sb2dvdXQoKTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmxvYWRQYWdlKCk7CiAgfQp9KTs="},{"version":3,"sources":["/home/admin/Documents/client-part2/node_modules/vuetify-loader/lib/loader.js??ref--19-0!/home/admin/Documents/client-part2/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/admin/Documents/client-part2/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/admin/Documents/client-part2/src/App.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\n// ADD THE NEW COMPONENTS\nimport User from \"./components/User.vue\";\nimport Admin from \"./components/Admin.vue\";\nimport Nav from \"./components/Nav.vue\";\n// ADD KEYCLOAK\nimport Keycloak from \"../node_modules/keycloak-js/dist/keycloak\";\n//ADD GRPC\nimport { grpc } from \"@improbable-eng/grpc-web\";\n//ADD STUBS\nimport { HelloRequest, HelloReply } from \"@/hello/src/proto/hello_pb\";\nimport { HelloService } from \"@/hello/src/proto/hello_pb_service\";\n\nexport default Vue.extend({\n  name: \"App\",\n\n  components: {\n    User,\n    Admin,\n    Nav\n  },\n\n  data: () => ({\n    componentName: \"\",\n    peopleArr: [],\n    peopleHeader:[\"ID\", \"Name\", \"Address\", \"Phone\"],\n    role: String,\n    headerName: String,\n    initOptions: {\n      realm:  \"keycloak-demo\",\n      url: \"http://localhost:8080/auth/\",\n      clientId: \"vue-test-app\"\n    },\n    keycloak: Keycloak()\n  }),\n\n  methods: {\n    // logOut(): any{\n      \n    //   console.log(\"LOGOUT\");\n    //   this.keycloak.logout();\n\n    // },\n    loadPage(): any {\n\n      // THIS IS THE COPIED CODE FROM THE KEYCLOAK ADMINISTRATION CONSOLE. JUST ADAPT IT, SO THAT IT MATHES THIS FORMAT\n      this.keycloak = Keycloak(this.initOptions);\n\n      let roles = \"\";\n\n      this.keycloak\n        .init({\n          onLoad: \"login-required\"\n        })\n        .success((auth: any) => {\n\n          // CHECK IF THE USER IS AUTHENTICATED\n          if (!auth) {\n            window.location.reload();\n          } else {\n            console.log(\"SUCCESSFULLY AUTHENTICATED\");\n\n            // CHECK WHAT ROLES THEY HAVE AND DISPLAY THE COMPONENT ACCORDING TO THE ROLE\n            roles = JSON.parse(JSON.stringify(this.keycloak.tokenParsed));\n            this.role = roles.realm_access.roles;\n            this.componentName = String(this.role);\n\n            this.headerName = this.componentName == 'admin'? 'purple' : 'teal';\n\n            //MAKE GRPC CALL TO BACKEND\n            const req = new HelloRequest();\n            req.setRole(String(this.role));\n\n            const repl = new HelloReply();\n\n            grpc.invoke(HelloService.Hello, {\n              request: req,\n              host: \"http://127.0.0.1:9090/\",\n              onMessage: (message: HelloReply) => {\n                console.log(\"RECEIVED DATA\", message.toObject());\n                for (let i = 0; i < message.array[0].length; i++) {\n                    this.peopleArr.push(message.array[0][i]);         \n                }             \n              },\n              onEnd: (\n                code: grpc.Code,\n                msg: string | undefined,\n                trailers: grpc.Metadata\n              ) => {\n                if (code === grpc.Code.OK) {\n                  console.log(\"CALL WAS SUCCESSFULL\");\n                  console.log(code);\n                  console.log(msg);\n                  console.log(trailers);\n                } else {\n                  console.log(\"CALL FAILED\");\n                  console.log(code);\n                  console.log(msg);\n                  console.log(trailers);\n                }\n              }\n            });\n          }\n\n          // SET THE TOKEN IN THE LOCALSTORAGE\n          localStorage.setItem(\"vue-token\", String(this.keycloak.token));\n          localStorage.setItem(\n            \"vue-refresh-token\",\n            String(this.keycloak.refreshToken)\n          );\n\n          // HANDLE TOKEN TIMEOUT\n          setTimeout(() => {\n            this.keycloak\n              .updateToken(70)\n              .success(refreshed => {\n                if (refreshed) {\n                  console.log(\"Token Refreshed\");\n                } else {\n                  console.log(\"Token Not Refreshed\");\n                }\n              })\n              .error(() => {\n                console.log(\"Failed To Refresh Token\");\n              });\n          }, 60000);\n        })\n        .error(() => {\n          console.log(\"AUTHENTICATION FAILED\");\n        });\n\n        // keycloak.logout();\n    }\n  },\n  mounted() {\n    this.loadPage();\n  }\n});\n"],"sourceRoot":""}]}